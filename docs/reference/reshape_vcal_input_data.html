<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Reshape calendar data: one row per woman-month — reshape_vcal_input_data • DHScalendars</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Reshape calendar data: one row per woman-month — reshape_vcal_input_data"><meta property="og:description" content='Returns a data frame where the calendar strings have been
parsed into single characters, then pivoted "from wide to long" so that
each character gets stored in a separate row (the number of rows in the
data frame usually grows by a factor of 80). Several different tests are
conducted to ensure that all available calendars are identified and
reshaped correctly. If the user is aware that one or more calendar columns
contains the wrong number of months (e.g. 79, while all others have 80),
the user may pad the offending calendar(s) with spaces via the 
pad_months argument.'><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">DHScalendars</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/Installation.html">Install this R Package</a>
    </li>
    <li>
      <a href="../articles/Quick-Start.html">Quick Start</a>
    </li>
    <li>
      <a href="../articles/Variables-in-LR-File.html">Variables in LR File</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.umn.edu/mpc/dhscalendars/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Reshape calendar data: one row per woman-month</h1>
    <small class="dont-index">Source: <a href="https://github.umn.edu/mpc/dhscalendars/blob/HEAD/R/reshape_vcal_input_data.R" class="external-link"><code>R/reshape_vcal_input_data.R</code></a></small>
    <div class="hidden name"><code>reshape_vcal_input_data.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Returns a data frame where the calendar strings have been
parsed into single characters, then pivoted "from wide to long" so that
each character gets stored in a separate row (the number of rows in the
data frame usually grows by a factor of 80). Several different tests are
conducted to ensure that all available calendars are identified and
reshaped correctly. If the user is aware that one or more calendar columns
contains the wrong number of months (e.g. 79, while all others have 80),
the user may pad the offending calendar(s) with spaces via the <code>
pad_months</code> argument.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">reshape_vcal_input_data</span><span class="op">(</span><span class="va">dat</span>, pad_months <span class="op">=</span> <span class="cn">NULL</span>, vcal_availability <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>dat</dt>
<dd><p>An IR data file created by <code><a href="get_vcal_input_data.html">get_vcal_input_data()</a></code></p></dd>
<dt>pad_months</dt>
<dd><p>Optional Named List: if necessary, the user can specify a
list of calendar variables in the IR file that need to be padded with left
or right spaces to reach a desired length (usually 80). Note that this
function will generate an error if all calendars are <em>not</em> the same
length (this will help you determine whether use of pad_months is needed).
For example: <code>
reshape_vcal_input_data(dat, list(vcal_1 = c(80, 'right')))</code></p></dd>
<dt>vcal_availability</dt>
<dd><p>Optional Character: the full path to a file called
vcal_availability.csv (this can usually be found automatically)</p></dd>
</dl></div>
    <div id="details">
    <h2>Details</h2>
    <p>This function will stop and issue a specific error message (with
instructions for next steps) if any of the following issues are found:</p>
<ul><li><p>The file vcal_availability.csv cannot be found</p></li>
<li><p>The file vcal_availability.csv does not contain the sample</p></li>
<li><p>The file vcal_availability.csv does not include all of the
  available calendars found in the data dictionary for the sample</p></li>
<li><p>The 'CMC start of calendar' variable (v017) contains multiple values
  (a non-fatal warning is issued, and the function will align the
  calendars - results should be manually verified)</p></li>
<li><p>Individual persons have different calendar lengths (usually 80).
  This would indicate a problem with DHS processing.</p></li>
<li><p>One or more of the calendars in a sample have different lengths
  (usually 80). Note: this may be resolved with the pad_months argument.</p></li>
<li><p>The user has requested padding for a calendar named in pad_months,
  but the name of the requested calendar does not exist</p></li>
<li><p>The user has requested padding for a calendar named in pad_months,
  but did not specify the desired length of the string for the requested
  calendar</p></li>
<li><p>The user has requested padding for a calendar named in pad_months,
  but did not specify whether to pad the calendar with spaces on the left
  or right side of the existing string</p></li>
</ul></div>
    <div id="note">
    <h2>Note</h2>
    <p>As an intermediate processing step, all existing calendar names
(e.g. vcal_1, vcal_2, ... vcal_9) will be replaced with human-readable
names (e.g. vcal_reprod, vcal_discont, ... vcal_ultra) based on the
availability of calendars shown in vcal_availability.csv. Any calendars
that are <em>not</em> available for the sample will be attached as
placeholders, where all values are NA. All calendar variables will be
removed from the data in a later function.</p>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Matt Gunther</p>
    </div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Matt Gunther.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.1.</p>
</div>

      </footer></div>

  


  

  </body></html>

